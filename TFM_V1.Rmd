---
title: "TFM_v1"
author: "María Perea"
date: "9 de julio de 2020"
output: html_document
---

#### Importando fichero "Mortality_rate_Newborn_Child.csv"
****IMPORTANDO fichero con el indicador: Selección y cambio de nombre en columnas, creando tabla de Wide a Longer.
```{r}
Rate_Child_all<-read.csv("Mortality_rate_Newborn_Child.csv",sep=",",header = TRUE,stringsAsFactors = FALSE,skip = 2)
Rate_Child<-Rate_Child_all[ ,c(1,31:59)]
colnames(Rate_Child)<-c("Who_Region","2018","2017","2016","2015","2014","2013","2012","2011","2010","2009","2008","2007","2006","2005","2004","2003","2002","2001","2000","1999","1998","1997","1996","1995","1994","1993","1992","1991","1990")

Rate_Child <- Rate_Child %>%
  pivot_longer(cols=`2018`:`1990`,
               names_to="year",
               values_to = "Rate_Mort_Child",
               names_ptypes = list(year=integer()))
glimpse(Rate_Child)
unique(Rate_Child$Who_Region)
unique(Rate_Child$year)
```

#### Análisis indicador Rate_Mort_Child
****Pivotando tabla de Longer a Wide (Regiones en columnas)

```{r}
Rate_Child_wide <- Rate_Child %>%
  pivot_wider(names_from=Who_Region, 
              values_from=Rate_Mort_Child)

stat_wide<-stat.desc(Rate_Child_wide,norm = TRUE)
stat_wide<-round(stat_wide,2)
stat_wide

```

###### Gráficos

```{r}
ggplot(data=Rate_Child,aes(x=Who_Region,y=Rate_Mort_Child))+
 geom_boxplot(aes(fill=Who_Region)) +
  ggtitle("Mortality Rate Child(Under Five years) per 1000 live births")+
  theme(plot.title = element_text(hjust = 0.5))+
  theme(axis.text.x=element_text(angle=60, hjust=1))



ggplot(data=Rate_Child,aes(x=year,y=Rate_Mort_Child))+
  geom_point(aes(col=Who_Region))+
  ggtitle("Mortality Rate Child(Under Five years) per 1000 live births")
```


#### Importando fichero "International_Health_Regulations.csv""
**** Contiene 13 indicadores de la Regulación Internacional de Salud(Encuestas)
**** Se importa el fichero seleccionando las columnas de cada indicador
**** Pivotando cada tabla de Wide a Longer


```{r}

Int_Health_Regulat<-read.csv("International_Health_Regulations.csv",sep=",",header = TRUE,stringsAsFactors = FALSE,skip = 1)

#### Legislation
Int_Health_Regulat_Legislation<-Int_Health_Regulat[ ,c(1:9)]
colnames(Int_Health_Regulat_Legislation)<-c("Who_Region","2017","2016","2015","2014","2013","2012","2011","2010")
Int_Health_Regulat_Legislation <- Int_Health_Regulat_Legislation %>%
  pivot_longer(cols=`2017`:`2010`,
               names_to="year",
               values_to = "Legislation",
               names_ptypes = list(year=integer()))

#### Coordination
Int_Health_Regulat_Coordination<-Int_Health_Regulat[ ,c(1,10:17)]
colnames(Int_Health_Regulat_Coordination)<-c("Who_Region","2017","2016","2015","2014","2013","2012","2011","2010")
Int_Health_Regulat_Coordination<- Int_Health_Regulat_Coordination %>%
  pivot_longer(cols=`2017`:`2010`,
               names_to="year",
               values_to = "Coordination",
               names_ptypes = list(year=integer()))

#### Surveillance
Int_Health_Regulat_Surveillance<-Int_Health_Regulat[ ,c(1,18:25)]                                          
colnames(Int_Health_Regulat_Surveillance)<-c("Who_Region","2017","2016","2015","2014","2013","2012","2011","2010")
Int_Health_Regulat_Surveillance<- Int_Health_Regulat_Surveillance %>%
  pivot_longer(cols=`2017`:`2010`,
               names_to="year",
               values_to = "Surveillance",
               names_ptypes = list(year=integer()))
#### Response
Int_Health_Regulat_Response<-Int_Health_Regulat[ ,c(1,26:33)]
colnames(Int_Health_Regulat_Response)<-c("Who_Region","2017","2016","2015","2014","2013","2012","2011","2010")
Int_Health_Regulat_Response<- Int_Health_Regulat_Response %>%
  pivot_longer(cols=`2017`:`2010`,
               names_to="year",
               values_to = "Response",
               names_ptypes = list(year=integer()))
#### Preparedness
Int_Health_Regulat_Preparedness<-Int_Health_Regulat[ ,c(1,34:41)]
colnames(Int_Health_Regulat_Preparedness)<-c("Who_Region","2017","2016","2015","2014","2013","2012","2011","2010")
Int_Health_Regulat_Preparedness<- Int_Health_Regulat_Preparedness %>%
  pivot_longer(cols=`2017`:`2010`,
               names_to="year",
               values_to = "Preparedness",
               names_ptypes = list(year=integer()))
 
#### Risk_communication
Int_Health_Regulat_Risk_communication<-Int_Health_Regulat[ ,c(1,42:49)]
colnames(Int_Health_Regulat_Risk_communication)<-c("Who_Region","2017","2016","2015","2014","2013","2012","2011","2010")
Int_Health_Regulat_Risk_communication<- Int_Health_Regulat_Risk_communication %>%
  pivot_longer(cols=`2017`:`2010`,
               names_to="year",
               values_to = "Risk_communication",
               names_ptypes = list(year=integer()))

#### Human_resources
Int_Health_Regulat_Human_resources<-Int_Health_Regulat[ ,c(1,50:57)]
colnames(Int_Health_Regulat_Human_resources)<-c("Who_Region","2017","2016","2015","2014","2013","2012","2011","2010")
Int_Health_Regulat_Human_resources<- Int_Health_Regulat_Human_resources %>%
  pivot_longer(cols=`2017`:`2010`,
               names_to="year",
               values_to = "Human_resources",
               names_ptypes = list(year=integer()))

#### Laboratory
Int_Health_Regulat_Laboratory<-Int_Health_Regulat[ ,c(1,58:65)]
colnames(Int_Health_Regulat_Laboratory)<-c("Who_Region","2017","2016","2015","2014","2013","2012","2011","2010")
Int_Health_Regulat_Laboratory<- Int_Health_Regulat_Laboratory %>%
  pivot_longer(cols=`2017`:`2010`,
               names_to="year",
               values_to = "Laboratory",
               names_ptypes = list(year=integer()))
#### Points_entry
Int_Health_Regulat_Points_entry<-Int_Health_Regulat[ ,c(1,66:73)]
colnames(Int_Health_Regulat_Points_entry)<-c("Who_Region","2017","2016","2015","2014","2013","2012","2011","2010")
Int_Health_Regulat_Points_entry<- Int_Health_Regulat_Points_entry %>%
  pivot_longer(cols=`2017`:`2010`,
               names_to="year",
               values_to = "Points_entry",
               names_ptypes = list(year=integer()))
#### Zoonosis
Int_Health_Regulat_Zoonosis<-Int_Health_Regulat[ ,c(1,74:81)]
colnames(Int_Health_Regulat_Zoonosis)<-c("Who_Region","2017","2016","2015","2014","2013","2012","2011","2010")
Int_Health_Regulat_Zoonosis<- Int_Health_Regulat_Zoonosis %>%
  pivot_longer(cols=`2017`:`2010`,
               names_to="year",
               values_to = "Zoonosis",
               names_ptypes = list(year=integer()))
#### Food_safety
Int_Health_Regulat_Food_safety<-Int_Health_Regulat[ ,c(1,82:89)]
colnames(Int_Health_Regulat_Food_safety)<-c("Who_Region","2017","2016","2015","2014","2013","2012","2011","2010")
Int_Health_Regulat_Food_safety<- Int_Health_Regulat_Food_safety %>%
  pivot_longer(cols=`2017`:`2010`,
               names_to="year",
               values_to = "Food_safety",
               names_ptypes = list(year=integer()))
#### Chemical
Int_Health_Regulat_Chemical<-Int_Health_Regulat[ ,c(1,90:97)]
colnames(Int_Health_Regulat_Chemical)<-c("Who_Region","2017","2016","2015","2014","2013","2012","2011","2010")
Int_Health_Regulat_Chemical<- Int_Health_Regulat_Chemical %>%
  pivot_longer(cols=`2017`:`2010`,
               names_to="year",
               values_to = "Chemical",
               names_ptypes = list(year=integer()))

#### Radionuclear
Int_Health_Regulat_Radionuclear<-Int_Health_Regulat[ ,c(1,98:105)]
colnames(Int_Health_Regulat_Radionuclear)<-c("Who_Region","2017","2016","2015","2014","2013","2012","2011","2010")
Int_Health_Regulat_Radionuclear<- Int_Health_Regulat_Radionuclear %>%
  pivot_longer(cols=`2017`:`2010`,
               names_to="year",
               values_to = "Radionuclear",
               names_ptypes = list(year=integer()))
```

#### Fusionando con merge los 13 indicadores. Análisis de la fusión con glimpse, unique and stat.desc

```{r}
m1<-Reduce(function(...) merge(..., all=T), list(Int_Health_Regulat_Legislation,
                                                 Int_Health_Regulat_Coordination,
                                                 Int_Health_Regulat_Surveillance,
                                                 Int_Health_Regulat_Response,
                                                 Int_Health_Regulat_Preparedness,
                                                 Int_Health_Regulat_Risk_communication,
                                                 Int_Health_Regulat_Human_resources,
                                                 Int_Health_Regulat_Laboratory,
                                                 Int_Health_Regulat_Points_entry,
                                                 Int_Health_Regulat_Zoonosis,
                                                 Int_Health_Regulat_Food_safety,
                                                 Int_Health_Regulat_Chemical,
                                                 Int_Health_Regulat_Radionuclear))

glimpse(m1)
unique(m1$Who_Region)
unique(m1$year)
m1_num<-select_if(m1,is.numeric)
stat_m1<-stat.desc(m1_num)
stat_m1<-round(stat_m1,0)
stat_m1


```

#### Fusionando indicador principal con indicadores International_Health_Regulation 
**** Se decide excluir "Global" del indicador principal, porque en el resto de indicadores sólo está para dos años
**** Por tanto, nos quedaríamos con 7 años de evolutivo (2010-2017)
```{r}
Rate_Child_new<-Rate_Child %>% filter(Who_Region != "Global")
m2<-Reduce(function(...) merge (..., all=F), list(Rate_Child_new,m1))
glimpse(m2)
unique(m2$Who_Region)
unique(m2$year)
```

#### Importando 12 ficheros con los Ratios de Mortalidad por causa (variable: <5 años)
**** Sólo nos interesa la variable (0-4 years)
**** Se homogeiniza valores de "Who_Region"

```{r}
#### Asphyxia
Mort_Asphyxia_rate<-read.csv("MORT_Asphyxia_rate.csv",sep=",",header = TRUE,stringsAsFactors = FALSE,skip = 2)
Mort_Asphyxia_rate<-Mort_Asphyxia_rate[ ,c(1:2,5)]
colnames(Mort_Asphyxia_rate)<-c("Who_Region","year","Mort_Asphyxia_rate")

Mort_Asphyxia_rate$Who_Region[Mort_Asphyxia_rate$Who_Region == "Africa Region"]<-"Africa" 
Mort_Asphyxia_rate$Who_Region[Mort_Asphyxia_rate$Who_Region == "Region of the Americas"]<-"Americas"
Mort_Asphyxia_rate$Who_Region[Mort_Asphyxia_rate$Who_Region == "Eastern Mediterranean Region"]<-"Eastern Mediterranean"
Mort_Asphyxia_rate$Who_Region[Mort_Asphyxia_rate$Who_Region == "European Region"]<-"Europe"
Mort_Asphyxia_rate$Who_Region[Mort_Asphyxia_rate$Who_Region == "South-East Asia Region"]<-"South-East Asia"
Mort_Asphyxia_rate$Who_Region[Mort_Asphyxia_rate$Who_Region == "Western Pacific Region"]<-"Western Pacific"

glimpse(Mort_Asphyxia_rate)
unique(Mort_Asphyxia_rate$Who_Region)

####  Congenital_anom
Mort_Congenital_rate<-read.csv("MORT_Congenital_rate.csv",sep=",",header = TRUE,stringsAsFactors = FALSE,skip = 2)
Mort_Congenital_rate<-Mort_Congenital_rate[ ,c(1:2,5)]
colnames(Mort_Congenital_rate)<-c("Who_Region","year","Mort_Congenital_rate")

Mort_Congenital_rate$Who_Region[Mort_Congenital_rate$Who_Region == "Africa Region"]<-"Africa" 
Mort_Congenital_rate$Who_Region[Mort_Congenital_rate$Who_Region == "Region of the Americas"]<-"Americas"
Mort_Congenital_rate$Who_Region[Mort_Congenital_rate$Who_Region == "Eastern Mediterranean Region"]<-"Eastern Mediterranean"
Mort_Congenital_rate$Who_Region[Mort_Congenital_rate$Who_Region == "European Region"]<-"Europe"
Mort_Congenital_rate$Who_Region[Mort_Congenital_rate$Who_Region == "South-East Asia Region"]<-"South-East Asia"
Mort_Congenital_rate$Who_Region[Mort_Congenital_rate$Who_Region == "Western Pacific Region"]<-"Western Pacific"

glimpse(Mort_Congenital_rate)
unique(Mort_Congenital_rate$Who_Region)

####  Diarrhoeal_diseases

Mort_Diarrhoeal_diseases_rate<-read.csv("MORT_Diarre_rate.csv",sep=",",header = TRUE,stringsAsFactors = FALSE,skip = 2)
Mort_Diarrhoeal_diseases_rate<-Mort_Diarrhoeal_diseases_rate[ ,c(1:2,5)]
colnames(Mort_Diarrhoeal_diseases_rate)<-c("Who_Region","year","Mort_Diarrhoeal_rate")

Mort_Diarrhoeal_diseases_rate$Who_Region[Mort_Diarrhoeal_diseases_rate$Who_Region == "Africa Region"]<-"Africa" 
Mort_Diarrhoeal_diseases_rate$Who_Region[Mort_Diarrhoeal_diseases_rate$Who_Region == "Region of the Americas"]<-"Americas"
Mort_Diarrhoeal_diseases_rate$Who_Region[Mort_Diarrhoeal_diseases_rate$Who_Region == "Eastern Mediterranean Region"]<-"Eastern Mediterranean"
Mort_Diarrhoeal_diseases_rate$Who_Region[Mort_Diarrhoeal_diseases_rate$Who_Region == "European Region"]<-"Europe"
Mort_Diarrhoeal_diseases_rate$Who_Region[Mort_Diarrhoeal_diseases_rate$Who_Region == "South-East Asia Region"]<-"South-East Asia"
Mort_Diarrhoeal_diseases_rate$Who_Region[Mort_Diarrhoeal_diseases_rate$Who_Region == "Western Pacific Region"]<-"Western Pacific"

glimpse(Mort_Diarrhoeal_diseases_rate)
unique(Mort_Diarrhoeal_diseases_rate$Who_Region)


####  MORT_HIVAIDS_rate

Mort_HIVAIDS_rate<-read.csv("MORT_HIVAIDS_rate.csv",sep=",",header = TRUE,stringsAsFactors = FALSE,skip = 2)
Mort_HIVAIDS_rate<-Mort_HIVAIDS_rate[ ,c(1:2,5)]
colnames(Mort_HIVAIDS_rate)<-c("Who_Region","year","Mort_HIVAIDS_dis_rate")

Mort_HIVAIDS_rate$Who_Region[Mort_HIVAIDS_rate$Who_Region == "Africa Region"]<-"Africa" 
Mort_HIVAIDS_rate$Who_Region[Mort_HIVAIDS_rate$Who_Region == "Region of the Americas"]<-"Americas"
Mort_HIVAIDS_rate$Who_Region[Mort_HIVAIDS_rate$Who_Region == "Eastern Mediterranean Region"]<-"Eastern Mediterranean"
Mort_HIVAIDS_rate$Who_Region[Mort_HIVAIDS_rate$Who_Region == "European Region"]<-"Europe"
Mort_HIVAIDS_rate$Who_Region[Mort_HIVAIDS_rate$Who_Region == "South-East Asia Region"]<-"South-East Asia"
Mort_HIVAIDS_rate$Who_Region[Mort_HIVAIDS_rate$Who_Region == "Western Pacific Region"]<-"Western Pacific"

glimpse(Mort_HIVAIDS_rate)
unique(Mort_HIVAIDS_rate$Who_Region)

#### MORT_Malaria_rate

Mort_Malaria_rate<-read.csv("MORT_Malaria_rate.csv",sep=",",header = TRUE,stringsAsFactors = FALSE,skip = 2)
Mort_Malaria_rate<-Mort_Malaria_rate[ ,c(1:2,5)]
colnames(Mort_Malaria_rate)<-c("Who_Region","year","Mort_Malaria_rate")

Mort_Malaria_rate$Who_Region[Mort_Malaria_rate$Who_Region == "Africa Region"]<-"Africa" 
Mort_Malaria_rate$Who_Region[Mort_Malaria_rate$Who_Region == "Region of the Americas"]<-"Americas"
Mort_Malaria_rate$Who_Region[Mort_Malaria_rate$Who_Region == "Eastern Mediterranean Region"]<-"Eastern Mediterranean"
Mort_Malaria_rate$Who_Region[Mort_Malaria_rate$Who_Region == "European Region"]<-"Europe"
Mort_Malaria_rate$Who_Region[Mort_Malaria_rate$Who_Region == "South-East Asia Region"]<-"South-East Asia"
Mort_Malaria_rate$Who_Region[Mort_Malaria_rate$Who_Region == "Western Pacific Region"]<-"Western Pacific"

glimpse(Mort_Malaria_rate)
unique(Mort_Malaria_rate$Who_Region)

#### MORT_Measles_rate

Mort_Measles_rate<-read.csv("MORT_Measles_rate.csv",sep=",",header = TRUE,stringsAsFactors = FALSE,skip = 2)
Mort_Measles_rate<-Mort_Measles_rate[ ,c(1:2,5)]
colnames(Mort_Measles_rate)<-c("Who_Region","year","Mort_Measles_rate")

Mort_Measles_rate$Who_Region[Mort_Measles_rate$Who_Region == "Africa Region"]<-"Africa" 
Mort_Measles_rate$Who_Region[Mort_Measles_rate$Who_Region == "Region of the Americas"]<-"Americas"
Mort_Measles_rate$Who_Region[Mort_Measles_rate$Who_Region == "Eastern Mediterranean Region"]<-"Eastern Mediterranean"
Mort_Measles_rate$Who_Region[Mort_Measles_rate$Who_Region == "European Region"]<-"Europe"
Mort_Measles_rate$Who_Region[Mort_Measles_rate$Who_Region == "South-East Asia Region"]<-"South-East Asia"
Mort_Measles_rate$Who_Region[Mort_Measles_rate$Who_Region == "Western Pacific Region"]<-"Western Pacific"

glimpse(Mort_Measles_rate)
unique(Mort_Measles_rate$Who_Region)

#### MORT_Meningitis_rate

Mort_Meningitis_rate<-read.csv("MORT_Meningitis_rate.csv",sep=",",header = TRUE,stringsAsFactors = FALSE,skip = 2)
Mort_Meningitis_rate<-Mort_Meningitis_rate[ ,c(1:2,5)]
colnames(Mort_Meningitis_rate)<-c("Who_Region","year","Mort_Meningitis_rate")

Mort_Meningitis_rate$Who_Region[Mort_Meningitis_rate$Who_Region == "Africa Region"]<-"Africa" 
Mort_Meningitis_rate$Who_Region[Mort_Meningitis_rate$Who_Region == "Region of the Americas"]<-"Americas"
Mort_Meningitis_rate$Who_Region[Mort_Meningitis_rate$Who_Region == "Eastern Mediterranean Region"]<-"Eastern Mediterranean"
Mort_Meningitis_rate$Who_Region[Mort_Meningitis_rate$Who_Region == "European Region"]<-"Europe"
Mort_Meningitis_rate$Who_Region[Mort_Meningitis_rate$Who_Region == "South-East Asia Region"]<-"South-East Asia"
Mort_Meningitis_rate$Who_Region[Mort_Meningitis_rate$Who_Region == "Western Pacific Region"]<-"Western Pacific"

glimpse(Mort_Meningitis_rate)
unique(Mort_Meningitis_rate$Who_Region)

#### MORT_Other_rate

Mort_Other_rate<-read.csv("MORT_Other_Nutri_rate.csv",sep=",",header = TRUE,stringsAsFactors = FALSE,skip = 2)
Mort_Other_rate<-Mort_Other_rate[ ,c(1:2,5)]
colnames(Mort_Other_rate)<-c("Who_Region","year","Mort_Other_rate")

Mort_Other_rate$Who_Region[Mort_Other_rate$Who_Region == "Africa Region"]<-"Africa" 
Mort_Other_rate$Who_Region[Mort_Other_rate$Who_Region == "Region of the Americas"]<-"Americas"
Mort_Other_rate$Who_Region[Mort_Other_rate$Who_Region == "Eastern Mediterranean Region"]<-"Eastern Mediterranean"
Mort_Other_rate$Who_Region[Mort_Other_rate$Who_Region == "European Region"]<-"Europe"
Mort_Other_rate$Who_Region[Mort_Other_rate$Who_Region == "South-East Asia Region"]<-"South-East Asia"
Mort_Other_rate$Who_Region[Mort_Other_rate$Who_Region == "Western Pacific Region"]<-"Western Pacific"

glimpse(Mort_Other_rate)
unique(Mort_Other_rate$Who_Region)


#### MORT_Prematurity_rate

Mort_Prematurity_rate<-read.csv("MORT_Prematurity_rate.csv",sep=",",header = TRUE,stringsAsFactors = FALSE,skip = 2)
Mort_Prematurity_rate<-Mort_Prematurity_rate[ ,c(1:2,5)]
colnames(Mort_Prematurity_rate)<-c("Who_Region","year","Mort_Prematurity_rate")

Mort_Prematurity_rate$Who_Region[Mort_Prematurity_rate$Who_Region == "Africa Region"]<-"Africa" 
Mort_Prematurity_rate$Who_Region[Mort_Prematurity_rate$Who_Region == "Region of the Americas"]<-"Americas"
Mort_Prematurity_rate$Who_Region[Mort_Prematurity_rate$Who_Region == "Eastern Mediterranean Region"]<-"Eastern Mediterranean"
Mort_Prematurity_rate$Who_Region[Mort_Prematurity_rate$Who_Region == "European Region"]<-"Europe"
Mort_Prematurity_rate$Who_Region[Mort_Prematurity_rate$Who_Region == "South-East Asia Region"]<-"South-East Asia"
Mort_Prematurity_rate$Who_Region[Mort_Prematurity_rate$Who_Region == "Western Pacific Region"]<-"Western Pacific"

glimpse(Mort_Prematurity_rate)
unique(Mort_Prematurity_rate$Who_Region)

#### MORT_Respiratory_rate

Mort_Respiratory_rate<-read.csv("MORT_Respiratory_rate.csv",sep=",",header = TRUE,stringsAsFactors = FALSE,skip = 2)
Mort_Respiratory_rate<-Mort_Respiratory_rate[ ,c(1:2,5)]
colnames(Mort_Respiratory_rate)<-c("Who_Region","year","Mort_Respiratory_rate")

Mort_Respiratory_rate$Who_Region[Mort_Respiratory_rate$Who_Region == "Africa Region"]<-"Africa" 
Mort_Respiratory_rate$Who_Region[Mort_Respiratory_rate$Who_Region == "Region of the Americas"]<-"Americas"
Mort_Respiratory_rate$Who_Region[Mort_Respiratory_rate$Who_Region == "Eastern Mediterranean Region"]<-"Eastern Mediterranean"
Mort_Respiratory_rate$Who_Region[Mort_Respiratory_rate$Who_Region == "European Region"]<-"Europe"
Mort_Respiratory_rate$Who_Region[Mort_Respiratory_rate$Who_Region == "South-East Asia Region"]<-"South-East Asia"
Mort_Respiratory_rate$Who_Region[Mort_Respiratory_rate$Who_Region == "Western Pacific Region"]<-"Western Pacific"

glimpse(Mort_Respiratory_rate)
unique(Mort_Respiratory_rate$Who_Region)

#### MORT_Sepsis_rate

Mort_Sepsis_rate<-read.csv("MORT_Sepsis_rate.csv",sep=",",header = TRUE,stringsAsFactors = FALSE,skip = 2)
Mort_Sepsis_rate<-Mort_Sepsis_rate[ ,c(1:2,5)]
colnames(Mort_Sepsis_rate)<-c("Who_Region","year","Mort_Sepsis_rate")

Mort_Sepsis_rate$Who_Region[Mort_Sepsis_rate$Who_Region == "Africa Region"]<-"Africa" 
Mort_Sepsis_rate$Who_Region[Mort_Sepsis_rate$Who_Region == "Region of the Americas"]<-"Americas"
Mort_Sepsis_rate$Who_Region[Mort_Sepsis_rate$Who_Region == "Eastern Mediterranean Region"]<-"Eastern Mediterranean"
Mort_Sepsis_rate$Who_Region[Mort_Sepsis_rate$Who_Region == "European Region"]<-"Europe"
Mort_Sepsis_rate$Who_Region[Mort_Sepsis_rate$Who_Region == "South-East Asia Region"]<-"South-East Asia"
Mort_Sepsis_rate$Who_Region[Mort_Sepsis_rate$Who_Region == "Western Pacific Region"]<-"Western Pacific"

glimpse(Mort_Sepsis_rate)
unique(Mort_Sepsis_rate$Who_Region)

#### MORT_Tetanos_rate

Mort_Tetanos_rate<-read.csv("MORT_Tetanos_rate.csv",sep=",",header = TRUE,stringsAsFactors = FALSE,skip = 2)
Mort_Tetanos_rate<-Mort_Tetanos_rate[ ,c(1:2,5)]
colnames(Mort_Tetanos_rate)<-c("Who_Region","year","Mort_Tetanos_rate")

Mort_Tetanos_rate$Who_Region[Mort_Tetanos_rate$Who_Region == "Africa Region"]<-"Africa" 
Mort_Tetanos_rate$Who_Region[Mort_Tetanos_rate$Who_Region == "Region of the Americas"]<-"Americas"
Mort_Tetanos_rate$Who_Region[Mort_Tetanos_rate$Who_Region == "Eastern Mediterranean Region"]<-"Eastern Mediterranean"
Mort_Tetanos_rate$Who_Region[Mort_Tetanos_rate$Who_Region == "European Region"]<-"Europe"
Mort_Tetanos_rate$Who_Region[Mort_Tetanos_rate$Who_Region == "South-East Asia Region"]<-"South-East Asia"
Mort_Tetanos_rate$Who_Region[Mort_Tetanos_rate$Who_Region == "Western Pacific Region"]<-"Western Pacific"

glimpse(Mort_Tetanos_rate)
unique(Mort_Tetanos_rate$Who_Region)

```



#### Fusionando los 12 indicadores de las causas de Mortalidad Infantil(Rate)

```{r}
m3<-Reduce(function(...) merge(..., all=T), list(Mort_Asphyxia_rate,
                                                 Mort_Congenital_rate,
                                                 Mort_Diarrhoeal_diseases_rate,
                                                 Mort_HIVAIDS_rate,
                                                 Mort_Malaria_rate,
                                                 Mort_Measles_rate,
                                                 Mort_Meningitis_rate,
                                                 Mort_Other_rate,
                                                 Mort_Respiratory_rate,
                                                 Mort_Prematurity_rate,
                                                 Mort_Sepsis_rate,
                                                 Mort_Tetanos_rate))

glimpse(m3)
unique(m3$Who_Region)
unique(m3$year)
m3_num<-select_if(m3,is.numeric)
stat_m3<-stat.desc(m3_num)
stat_m3<-round(stat_m3,0)
View(stat_m3)
```


#### Fusionando tabla principal acumulado con la tabla indicadores "Mort_Cause_Rate""

```{r}
m4<-Reduce(function(...) merge (..., all=F), list(m2,m3))
glimpse(m4)
unique(m4$Who_Region)
unique(m4$year)
View(m4)

```


#### Importando ficheros con los indicadores "Immunization coverage"
**** Se pivota de wide a longer
**** Son nueve en total
```{r}
#### Inm_BCG.csv
Inm_BCG<-read.csv("Inm_BCG.csv",sep=",",header = TRUE,stringsAsFactors = FALSE,skip = 1)
Inm_BCG<-Inm_BCG[ ,c(1:10)]
colnames(Inm_BCG)<-c("Who_Region","2018","2017","2016","2015","2014","2013","2012","2011","2010")

Inm_BCG<- Inm_BCG %>%
  pivot_longer(cols=`2018`:`2010`,
               names_to="year",
               values_to = "Inm_BCG_coverage",
               names_ptypes = list(year=integer()))

glimpse(Inm_BCG)
unique(Inm_BCG$Who_Region)
unique(Inm_BCG$year)

#### Inm_DTP3.csv
Inm_DTP3<-read.csv("Inm_DTP3.csv",sep=",",header = TRUE,stringsAsFactors = FALSE,skip = 1)
Inm_DTP3<-Inm_DTP3[ ,c(1:10)]
colnames(Inm_DTP3)<-c("Who_Region","2018","2017","2016","2015","2014","2013","2012","2011","2010")

Inm_DTP3<- Inm_DTP3 %>%
  pivot_longer(cols=`2018`:`2010`,
               names_to="year",
               values_to = "Inm_DTP3_coverage",
               names_ptypes = list(year=integer()))

glimpse(Inm_DTP3)
unique(Inm_DTP3$Who_Region)
unique(Inm_DTP3$year)


#### Inm_Hep3.csv
Inm_Hep3<-read.csv("Inm_Hep3.csv",sep=",",header = TRUE,stringsAsFactors = FALSE,skip = 1)
Inm_Hep3<-Inm_Hep3[ ,c(1:10)]
colnames(Inm_Hep3)<-c("Who_Region","2018","2017","2016","2015","2014","2013","2012","2011","2010")

Inm_Hep3<- Inm_Hep3 %>%
  pivot_longer(cols=`2018`:`2010`,
               names_to="year",
               values_to = "Inm_Hep3_coverage",
               names_ptypes = list(year=integer()))

glimpse(Inm_Hep3)
unique(Inm_Hep3$Who_Region)
unique(Inm_Hep3$year)

#### Inm_HepB3.csv
Inm_HepB3<-read.csv("Inm_HepB3.csv",sep=",",header = TRUE,stringsAsFactors = FALSE,skip = 1)
Inm_HepB3<-Inm_HepB3[ ,c(1:10)]
colnames(Inm_HepB3)<-c("Who_Region","2018","2017","2016","2015","2014","2013","2012","2011","2010")

Inm_HepB3<- Inm_HepB3 %>%
  pivot_longer(cols=`2018`:`2010`,
               names_to="year",
               values_to = "Inm_HepB3_coverage",
               names_ptypes = list(year=integer()))

glimpse(Inm_HepB3)
unique(Inm_HepB3$Who_Region)
unique(Inm_HepB3$year)

#### Inm_MCV1_1st.csv
Inm_MCV1_1st<-read.csv("Inm_MCV1_1st.csv",sep=",",header = TRUE,stringsAsFactors = FALSE,skip = 1)
Inm_MCV1_1st<-Inm_MCV1_1st[ ,c(1:10)]
colnames(Inm_MCV1_1st)<-c("Who_Region","2018","2017","2016","2015","2014","2013","2012","2011","2010")

Inm_MCV1_1st<- Inm_MCV1_1st %>%
  pivot_longer(cols=`2018`:`2010`,
               names_to="year",
               values_to = "Inm_MCV1_1st_coverage",
               names_ptypes = list(year=integer()))

glimpse(Inm_MCV1_1st)
unique(Inm_MCV1_1st$Who_Region)
unique(Inm_MCV1_1st$year)

#### Inm_MCV2_2nd.csv
Inm_MCV2_2nd<-read.csv("Inm_MCV2_2nd.csv",sep=",",header = TRUE,stringsAsFactors = FALSE,skip = 1)
Inm_MCV2_2nd<-Inm_MCV2_2nd[ ,c(1:10)]
colnames(Inm_MCV2_2nd)<-c("Who_Region","2018","2017","2016","2015","2014","2013","2012","2011","2010")

Inm_MCV2_2nd<- Inm_MCV2_2nd %>%
  pivot_longer(cols=`2018`:`2010`,
               names_to="year",
               values_to = "Inm_MCV2_2nd_coverage",
               names_ptypes = list(year=integer()))

glimpse(Inm_MCV2_2nd)
unique(Inm_MCV2_2nd$Who_Region)
unique(Inm_MCV2_2nd$year)

#### Inm_PCV3.csv
Inm_PCV3<-read.csv("Inm_PCV3.csv",sep=",",header = TRUE,stringsAsFactors = FALSE,skip = 1)
Inm_PCV3<-Inm_PCV3[ ,c(1:10)]
colnames(Inm_PCV3)<-c("Who_Region","2018","2017","2016","2015","2014","2013","2012","2011","2010")

Inm_PCV3<- Inm_PCV3 %>%
  pivot_longer(cols=`2018`:`2010`,
               names_to="year",
               values_to = "Inm_PCV3_coverage",
               names_ptypes = list(year=integer()))

glimpse(Inm_PCV3)
unique(Inm_PCV3$Who_Region)
unique(Inm_PCV3$year)

#### Inm_Pol3.csv
Inm_Pol3<-read.csv("Inm_Pol3.csv",sep=",",header = TRUE,stringsAsFactors = FALSE,skip = 1)
Inm_Pol3<-Inm_Pol3[ ,c(1:10)]
colnames(Inm_Pol3)<-c("Who_Region","2018","2017","2016","2015","2014","2013","2012","2011","2010")

Inm_Pol3<- Inm_Pol3 %>%
  pivot_longer(cols=`2018`:`2010`,
               names_to="year",
               values_to = "Inm_Pol3_coverage",
               names_ptypes = list(year=integer()))

glimpse(Inm_Pol3)
unique(Inm_Pol3$Who_Region)
unique(Inm_Pol3$year)

#### Inm_ROTAC.csv
Inm_ROTAC<-read.csv("Inm_ROTAC.csv",sep=",",header = TRUE,stringsAsFactors = FALSE,skip = 1)
Inm_ROTAC<-Inm_ROTAC[ ,c(1:10)]
colnames(Inm_ROTAC)<-c("Who_Region","2018","2017","2016","2015","2014","2013","2012","2011","2010")

Inm_ROTAC<- Inm_ROTAC %>%
  pivot_longer(cols=`2018`:`2010`,
               names_to="year",
               values_to = "Inm_ROTAC_coverage",
               names_ptypes = list(year=integer()))

glimpse(Inm_ROTAC)
unique(Inm_ROTAC$Who_Region)
unique(Inm_ROTAC$year)
```


#### Fusionando tablas con los indicadores "Inm_Cause_Rate"

```{r}
m5<-Reduce(function(...) merge(..., all=T), list(Inm_BCG,
                                                 Inm_DTP3,
                                                 Inm_Hep3,
                                                 Inm_HepB3,
                                                 Inm_MCV1_1st,
                                                 Inm_MCV2_2nd,
                                                 Inm_PCV3,
                                                 Inm_Pol3,
                                                 Inm_ROTAC))

glimpse(m5)
unique(m5$Who_Region)
unique(m5$year)
m5_num<-select_if(m5,is.numeric)
stat_m5<-stat.desc(m5_num)
stat_m5<-round(stat_m5,0)
stat_m5
```

#### Merge de la tabla principal con la tabla "Inm_Cause_Rate"
**** Total con 37 variables y 48 registros

```{r}
m6<-Reduce(function(...) merge (..., all=F), list(m4,m5))
glimpse(m6)
unique(m6$Who_Region)
unique(m6$year)
m6
```


#### Importando ficheros con los indicadores "Child Malnutrition"
**** Son dos indicadores, las variables contienen el valor y el intervalo de confianza, es de tipo carácter, se convierte a numérico
**** En el indicador "ANAEMIA_Children5" se tiene que pivotar la tabla de wide a longer


```{r}
#### Weight_Low_birth
A_Weight_Low_birth<-read.csv("A_Weight_Low_birth.csv",sep=",",header = TRUE,stringsAsFactors = FALSE)
A_Weight_Low_birth<-A_Weight_Low_birth[,c(1:2,4)]
colnames(A_Weight_Low_birth)<-c("Who_Region","year","Low_birth_weight")
A_Weight_Low_birth$Low_birth_weight<-substr(A_Weight_Low_birth$Low_birth_weight,1,4)
A_Weight_Low_birth$Low_birth_weight<-as.numeric(A_Weight_Low_birth$Low_birth_weight)
glimpse(A_Weight_Low_birth)
unique(A_Weight_Low_birth$Who_Region)
unique(A_Weight_Low_birth$year)


#### ANAEMIA_Children5
ANAEMIA_Children5<-read.csv("ANAEMIA_Children5.csv",sep=",",header = TRUE,stringsAsFactors = FALSE,skip = 1)
ANAEMIA_Children5<-ANAEMIA_Children5[,c(1:8)]
colnames(ANAEMIA_Children5)<-c("Who_Region","2016","2015","2014","2013","2012","2011","2010")

ANAEMIA_Children5<- ANAEMIA_Children5 %>%
  pivot_longer(cols=`2016`:`2010`,
               names_to="year",
               values_to = "ANAEMIA_Children5",
               names_ptypes = list(year=integer()))

ANAEMIA_Children5$ANAEMIA_Children5<-substr(ANAEMIA_Children5$ANAEMIA_Children5,1,4)
ANAEMIA_Children5$ANAEMIA_Children5<-as.numeric(ANAEMIA_Children5$ANAEMIA_Children5)
glimpse(ANAEMIA_Children5)
unique(ANAEMIA_Children5$Who_Region)
unique(ANAEMIA_Children5$year)
```


## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
